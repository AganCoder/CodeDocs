
# Trojan 源码阅读之什么是 Trojan

在国内，如果你想访问外部网站（例如 Google、Twitter等），就需要梯子翻墙，这里的墙指的是[防火城墙](https://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E)，英文称为 Great Firewall（简称”GFW“）。GFW 的作用是对跨境流量进行分析，对符合要求的允许通过。


这里要说明的一点，GFW 采用的是黑名单的方式进行访问的，名单上的网站肯定是访问不了，例如 Google。不在黑名单上的是可以进行访问的。这就给翻墙带来了一种可能，通过境外的服务器转发请求，然后将请求结果再返回回来，这就达成了翻墙的效果。

但是道高一尺魔高一丈，GFW 会对可疑流量进行分析，如果确定是代理流量，肯定是将境外服务器加入黑名单。就算分析不出来，也会将其加入可疑名单，在某些敏感时期，也可能会被墙。那这就衍生出一个问题，梯子的流量如何不被 GFW 识别出来，或者直白点说，如何绕过 GFW，流量不被 GFW 识别出。

Github 上不断有人提出不同的方案，比较有名的有 Shadowsocks，V2ray等，它们都是通过加密手段使得传输的时数据包没有任何特征，看起来像是随机的比特流。

这种方式在早期的确可得，因为早期 GFW 采用的是"被动检测"，来了才识别。识别不了就放行。但是目前 GFW 现在采用”主动探测“，当出现识别不了流量（大流量，随机字节流，高位端口等特征）的时候，它可以通过技术手段进行重放，当 Shadowsocks 服务器检测到不正常的连接，就会断开连接。这种不正常的流量和断开连接也可以视为可疑的 Shadowsocks 行为，GFW 可以将该服务器加入到可疑名单中。

通过对 Shadowsocks 的解释，你也许可能会这样考虑：如果 GFW 的重放时候，返回正常的内容，连接不断开，这样是否能可行？ 



